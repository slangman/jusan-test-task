# Микросервис для интеграции с https://weatherapi.com #
Позволяет создавать страны, регионы и города в базе данных и запрашивать для созданных городов текущую погоду и прогноз погоды на указанное количество дней.
Также позволяет отправлять запрос на получение текущей погоды для любого города напрямую в Weather API. <br />
Особенность Weather API такова что если в мире существует несколько городов с одинаковыми названиями (к примеру, Hyderabad есть и в Индии и в Пакистане), то при запросе по имени города API выдает результат только для первого найденного города.
Тем не менее, Weather API позволяет искать ID города по названию и в этом случае выдются все результаты для городов с одинаковыми названиями. <br />
Реализация микросервиса упрощает поиск городов по названиям. Если в запросе на API микросервиса передать только название города, то результат будет выдан для всех городов с одинаковыми названиями. 
Однако, можно задать более конкретизированный запрос, указав также имя страны и/или региона, в этом случае будет возвращен результат с учетом всех переданных параметров.

## Требования ##
- Java 17;
- Gradle 8.x;
- Валидный API Key для https://www.weatherapi.com/

## Добавление API Key в системную переменную ##

API Key нужно добавить в системную переменную WEATHERAPI_KEY.

Для Windows: 

- Открыть командную строку от имени администратора;

- Добавить переменную для текущего пользователя:
```
	setx WEATHERAPI_KEY="your_api_key"
```
- Добавить переменную для всех пользователей:
```
	setx WEATHERAPI_KEY="your_api_key" /M 
```
Потребуется перезагрузка.

## Запуск ##
Перейти в каталог проекта:
```
cd c:/jusan-test-task
```
Запустить тесты: 
```
gradle test
```
Запустить сервис:
```
gradle bootRun
```
Описание API Swagger UI: http://localhost:8080/swagger-ui.html

## Развертывание в контейнере ##
Перейти в каталог проекта:
```
cd c:/jusan-test-task
```
Создать контейнер:
```
docker build -t jusan-test-task .
```
Запустить контейнер:
```
docker run -e WEATHERAPI_KEY=[your_weather_api_key] -p 8080:8080 jusan-test-task
```


